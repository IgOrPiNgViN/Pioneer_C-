/*
===========================================
УРОК 9: ФУНКЦИИ (ОСНОВЫ)
===========================================

ЦЕЛИ УРОКА:
- Понять концепцию функций и зачем они нужны
- Изучить объявление и определение функций
- Научиться передавать параметры в функции
- Освоить возвращаемые значения
- Понять область видимости переменных

ТЕОРЕТИЧЕСКАЯ ЧАСТЬ:

ЧТО ТАКОЕ ФУНКЦИЯ:

Функция - это именованный блок кода, который выполняет определенную задачу.
Представь функцию как "мини-программу" внутри твоей программы.

Пример из жизни:
- Функция "сделать чай" включает: вскипятить воду, положить пакетик, залить водой
- Когда тебе нужен чай, ты просто "вызываешь" эту функцию, а не описываешь каждый шаг

ЗАЧЕМ НУЖНЫ ФУНКЦИИ:

1. Избежание повторения кода (DRY - Don't Repeat Yourself)
   Если тебе нужно выполнить одинаковые действия 10 раз,
   проще написать функцию один раз и вызвать её 10 раз

2. Модульность программы
   Большую задачу легче разбить на маленькие функции

3. Упрощение отладки
   Легче найти ошибку в маленькой функции

4. Переиспользование кода
   Функцию можно использовать в разных программах

5. Улучшение читаемости
   Код с функциями проще понять

ПРОСТЕЙШАЯ ФУНКЦИЯ:

Функция без параметров и возвращаемого значения (void):

void sayHello() {
    cout << "Привет!" << endl;
}

- void - означает, что функция ничего не возвращает
- sayHello - имя функции
- () - пустые скобки, параметров нет
- {} - тело функции (код внутри)

Вызов функции:
sayHello();  // выводит "Привет!"

1. СТРУКТУРА ФУНКЦИИ:

   тип_возврата имя_функции(параметры) {
       // тело функции
       return значение;  // для функций с возвращаемым значением
   }
   
   Пример:
   int add(int a, int b) {
       return a + b;
   }
   
   - int - тип возвращаемого значения
   - add - имя функции
   - int a, int b - параметры (входные данные)
   - return a + b - возвращаемое значение (результат)

2. ОБЪЯВЛЕНИЕ ФУНКЦИИ (ПРОТОТИП):

   Прототип функции сообщает компилятору о существовании функции.
   Обычно размещается в начале файла, перед main().
   
   Синтаксис: тип_возврата имя_функции(параметры);
   
   Примеры:
   int add(int a, int b);              // функция возвращает int
   void printMessage();                 // функция ничего не возвращает
   double calculateArea(double r);      // функция возвращает double
   bool isValid(int value);            // функция возвращает bool
   
   Зачем нужны прототипы:
   - Позволяют вызывать функцию до её определения
   - Улучшают организацию кода
   - Помогают компилятору проверять типы

3. ОПРЕДЕЛЕНИЕ ФУНКЦИИ:

   Определение функции содержит фактический код функции.
   
   Пример:
   int add(int a, int b) {
       return a + b;
   }
   
   Функция без возвращаемого значения:
   void printMessage() {
       cout << "Привет!" << endl;
   }
   
   Функция с несколькими return:
   int max(int a, int b) {
       if (a > b) {
           return a;
       } else {
           return b;
       }
   }
   
   Важно: Тип возвращаемого значения должен совпадать с объявленным!

4. ВЫЗОВ ФУНКЦИИ:

   Синтаксис: имя_функции(аргументы);
   
   Примеры:
   int result = add(5, 3);        // вызов функции, результат сохраняется
   printMessage();                 // вызов функции без возвращаемого значения
   cout << add(10, 20) << endl;   // вызов функции в выражении
   
   Аргументы - это значения, которые мы передаём в функцию.
   Параметры - это переменные, которые принимают эти значения.
   
   int add(int a, int b)  // a и b - параметры
   add(5, 3);             // 5 и 3 - аргументы

ТИПЫ ФУНКЦИЙ:

1. ФУНКЦИИ БЕЗ ВОЗВРАЩАЕМОГО ЗНАЧЕНИЯ (void):

   Функция выполняет действия, но не возвращает результат.
   
   void printStars(int count) {
       for (int i = 0; i < count; i++) {
           cout << "*";
       }
       cout << endl;
   }
   
   Использование:
   printStars(10);  // выводит **********

2. ФУНКЦИИ С ВОЗВРАЩАЕМЫМ ЗНАЧЕНИЕМ:

   Функция возвращает результат определённого типа.
   
   int square(int x) {
       return x * x;
   }
   
   double average(double a, double b) {
       return (a + b) / 2.0;
   }
   
   bool isPositive(int n) {
       return n > 0;
   }
   
   Использование:
   int sq = square(5);           // sq = 25
   double avg = average(10, 20); // avg = 15.0
   if (isPositive(-5)) { ... }   // условие ложно

3. ФУНКЦИИ БЕЗ ПАРАМЕТРОВ:

   Функция не принимает входных данных.
   
   void printMenu() {
       cout << "1. Новая игра" << endl;
       cout << "2. Загрузить" << endl;
       cout << "3. Выход" << endl;
   }
   
   int getRandomNumber() {
       return rand() % 100;  // случайное число от 0 до 99
   }

4. ФУНКЦИИ С ПАРАМЕТРАМИ:

   Функция принимает один или несколько параметров.
   
   void greet(string name) {
       cout << "Привет, " << name << "!" << endl;
   }
   
   int multiply(int a, int b, int c) {
       return a * b * c;
   }

ПЕРЕДАЧА ПАРАМЕТРОВ ПО ЗНАЧЕНИЮ:

Когда ты передаёшь переменную в функцию, создаётся КОПИЯ этой переменной.
Изменения внутри функции НЕ влияют на оригинальную переменную.

Пример:
void increment(int x) {
    x++;  // изменяется только КОПИЯ
    cout << "Внутри функции: x = " << x << endl;
}

int main() {
    int num = 10;
    increment(num);
    cout << "После вызова: num = " << num << endl;
    return 0;
}

Вывод:
Внутри функции: x = 11
После вызова: num = 10  // num НЕ изменился!

Это называется "передача по значению" - функция работает с копией.

ПАРАМЕТРЫ ПО УМОЛЧАНИЮ:

Параметры могут иметь значения по умолчанию.

void greet(string name, string greeting = "Привет") {
    cout << greeting << ", " << name << "!" << endl;
}

Использование:
greet("Иван");                   // "Привет, Иван!"
greet("Иван", "Здравствуй");     // "Здравствуй, Иван!"

Правила:
- Параметры по умолчанию должны быть в конце списка
- Нельзя пропускать параметры в середине

void func(int a, int b = 10, int c = 20);  // правильно
func(5);        // a=5, b=10, c=20
func(5, 15);    // a=5, b=15, c=20
func(5, 15, 25); // a=5, b=15, c=25

void func(int a = 10, int b);  // ОШИБКА! Параметр по умолчанию не в конце

ОБЛАСТЬ ВИДИМОСТИ ПЕРЕМЕННЫХ:

Область видимости (scope) - это часть программы, где переменная доступна.

1. ЛОКАЛЬНЫЕ ПЕРЕМЕННЫЕ:

   Переменные, объявленные внутри функции.
   Доступны только внутри этой функции.
   
   void func1() {
       int x = 10;  // локальная переменная
       cout << x;    // OK
   }
   
   void func2() {
       // cout << x;  // ОШИБКА! x не видна здесь
   }

2. ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ:

   Переменные, объявленные вне всех функций.
   Доступны во всех функциях программы.
   
   int globalVar = 100;  // глобальная переменная
   
   void func1() {
       cout << globalVar;  // OK, видна везде
   }
   
   void func2() {
       globalVar = 200;    // OK, можно изменять
   }
   
   Рекомендация: Избегай глобальных переменных!
   Они усложняют отладку и понимание кода.

3. БЛОЧНАЯ ОБЛАСТЬ ВИДИМОСТИ:

   Переменные, объявленные в блоках (if, for, while).
   
   void func() {
       int x = 10;
       
       if (x > 5) {
           int y = 20;  // видна только в этом if
           cout << y;   // OK
       }
       
       // cout << y;   // ОШИБКА! y не видна здесь
   }

4. СКРЫТИЕ ПЕРЕМЕННЫХ:

   Локальная переменная "скрывает" глобальную с тем же именем.
   
   int x = 100;  // глобальная
   
   void func() {
       int x = 10;  // локальная (скрывает глобальную)
       cout << x;   // выводит 10 (локальная)
   }

ФУНКЦИИ, ВОЗВРАЩАЮЩИЕ BOOL:

Очень полезны для проверок и условий.

bool isEven(int n) {
    return n % 2 == 0;
}

bool isInRange(int n, int min, int max) {
    return n >= min && n <= max;
}

bool isValidAge(int age) {
    return age >= 0 && age <= 150;
}

Использование:
if (isEven(10)) {
    cout << "Чётное" << endl;
}

if (isInRange(50, 1, 100)) {
    cout << "В диапазоне" << endl;
}

ФУНКЦИИ ДЛЯ РАБОТЫ С МАССИВАМИ:

При передаче массива в функцию нужно также передать его размер!

void printArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        cout << arr[i] << " ";
    }
    cout << endl;
}

int findMax(int arr[], int size) {
    int max = arr[0];
    for (int i = 1; i < size; i++) {
        if (arr[i] > max) {
            max = arr[i];
        }
    }
    return max;
}

int findSum(int arr[], int size) {
    int sum = 0;
    for (int i = 0; i < size; i++) {
        sum += arr[i];
    }
    return sum;
}

Использование:
int arr[5] = {3, 7, 1, 9, 4};
printArray(arr, 5);           // 3 7 1 9 4
int max = findMax(arr, 5);    // max = 9
int sum = findSum(arr, 5);    // sum = 24

ПЕРЕГРУЗКА ФУНКЦИЙ:

В C++ можно создать несколько функций с одним именем,
но разными параметрами.

int add(int a, int b) {
    return a + b;
}

double add(double a, double b) {
    return a + b;
}

int add(int a, int b, int c) {
    return a + b + c;
}

Компилятор выбирает нужную функцию по типам и количеству аргументов:
int sum1 = add(5, 3);           // вызывает int add(int, int)
double sum2 = add(5.5, 3.2);    // вызывает double add(double, double)
int sum3 = add(1, 2, 3);        // вызывает int add(int, int, int)

Правила перегрузки:
- Функции должны отличаться количеством или типами параметров
- Нельзя перегружать только по типу возвращаемого значения

РЕКУРСИЯ (ОСНОВЫ):

Рекурсия - это когда функция вызывает сама себя.

Пример - факториал:
5! = 5 * 4 * 3 * 2 * 1 = 120

int factorial(int n) {
    if (n <= 1) {
        return 1;  // базовый случай (условие выхода)
    }
    return n * factorial(n - 1);  // рекурсивный вызов
}

Как это работает:
factorial(5)
= 5 * factorial(4)
= 5 * 4 * factorial(3)
= 5 * 4 * 3 * factorial(2)
= 5 * 4 * 3 * 2 * factorial(1)
= 5 * 4 * 3 * 2 * 1
= 120

Важно: Всегда должен быть базовый случай (условие выхода),
иначе рекурсия будет бесконечной!

Пример - сумма чисел от 1 до n:
int sumToN(int n) {
    if (n == 1) {
        return 1;
    }
    return n + sumToN(n - 1);
}

sumToN(5) = 5 + sumToN(4) = 5 + 4 + sumToN(3) = ... = 15

ТИПИЧНЫЕ ОШИБКИ:

1. Забыли return:
   int square(int x) {
       x * x;  // ОШИБКА! Нет return
   }
   
   Правильно:
   int square(int x) {
       return x * x;
   }

2. Неправильный тип возврата:
   int divide(int a, int b) {
       return a / b;  // потеря дробной части!
   }
   
   Если нужна дробная часть:
   double divide(int a, int b) {
       return (double)a / b;
   }

3. Не все пути возвращают значение:
   int max(int a, int b) {
       if (a > b) {
           return a;
       }
       // ОШИБКА! Нет return для случая a <= b
   }
   
   Правильно:
   int max(int a, int b) {
       if (a > b) {
           return a;
       }
       return b;
   }

4. Вызов функции без скобок:
   printMessage;   // ОШИБКА! Это не вызов
   printMessage(); // Правильно

СИНТАКСИС УРОКА:

1. Объявление функции (прототип):
   тип_возврата имя_функции(параметры);
   int sum(int a, int b);

2. Определение функции:
   тип_возврата имя_функции(параметры) {
       // тело функции
       return значение;
   }

3. Функция без возвращаемого значения:
   void имя_функции(параметры) {
       // тело функции
   }

4. Вызов функции:
   int result = sum(5, 3);
   printHello();

5. Параметры по умолчанию:
   void greet(string name = "Мир") { ... }
   greet();         // использует "Мир"
   greet("Иван");   // использует "Иван"

6. Передача по значению и по ссылке:
   void byValue(int x) { ... }     // копия
   void byRef(int& x) { ... }      // оригинал

ПРИМЕРЫ КОДА:
*/

#include <iostream>
#include <string>
#include <cstdlib>  // для rand()
#include <ctime>    // для time()
using namespace std;

// === ПРОТОТИПЫ ФУНКЦИЙ ===
void sayHello();
int add(int a, int b);
double calculateArea(double radius);
bool isEven(int n);
void printStars(int count);
int factorial(int n);
void printArray(int arr[], int size);
int findMax(int arr[], int size);

void examples() {
    srand(time(0));  // инициализация генератора случайных чисел
    
    // === ПРОСТЕЙШАЯ ФУНКЦИЯ ===
    cout << "=== ПРОСТЕЙШАЯ ФУНКЦИЯ ===" << endl;
    sayHello();
    sayHello();
    sayHello();
    
    // === ФУНКЦИЯ С ВОЗВРАЩАЕМЫМ ЗНАЧЕНИЕМ ===
    cout << "\n=== ФУНКЦИЯ С ВОЗВРАЩАЕМЫМ ЗНАЧЕНИЕМ ===" << endl;
    int result = add(5, 3);
    cout << "5 + 3 = " << result << endl;
    cout << "10 + 20 = " << add(10, 20) << endl;
    
    // === ФУНКЦИЯ С ПАРАМЕТРОМ ===
    cout << "\n=== ФУНКЦИЯ С ПАРАМЕТРОМ ===" << endl;
    double area = calculateArea(5.0);
    cout << "Площадь круга с радиусом 5: " << area << endl;
    
    // === ФУНКЦИЯ ВОЗВРАЩАЮЩАЯ BOOL ===
    cout << "\n=== ФУНКЦИЯ ВОЗВРАЩАЮЩАЯ BOOL ===" << endl;
    for (int i = 1; i <= 10; i++) {
        if (isEven(i)) {
            cout << i << " - чётное" << endl;
        } else {
            cout << i << " - нечётное" << endl;
        }
    }
    
    // === ФУНКЦИЯ С ПАРАМЕТРАМИ ===
    cout << "\n=== ФУНКЦИЯ С ПАРАМЕТРАМИ ===" << endl;
    printStars(5);
    printStars(10);
    printStars(20);
    
    // === РЕКУРСИВНАЯ ФУНКЦИЯ ===
    cout << "\n=== РЕКУРСИВНАЯ ФУНКЦИЯ ===" << endl;
    for (int i = 1; i <= 7; i++) {
        cout << i << "! = " << factorial(i) << endl;
    }
    
    // === ФУНКЦИИ ДЛЯ МАССИВОВ ===
    cout << "\n=== ФУНКЦИИ ДЛЯ МАССИВОВ ===" << endl;
    int arr[6] = {5, 8, 3, 12, 7, 2};
    cout << "Массив: ";
    printArray(arr, 6);
    cout << "Максимум: " << findMax(arr, 6) << endl;
}

// === ОПРЕДЕЛЕНИЯ ФУНКЦИЙ ===

// Простейшая функция без параметров и возвращаемого значения
void sayHello() {
    cout << "Привет, мир!" << endl;
}

// Функция с параметрами и возвращаемым значением
int add(int a, int b) {
    return a + b;
}

// Функция вычисления площади круга
double calculateArea(double radius) {
    const double PI = 3.14159;
    return PI * radius * radius;
}

// Функция проверки чётности
bool isEven(int n) {
    return n % 2 == 0;
}

// Функция печати звёздочек
void printStars(int count) {
    for (int i = 0; i < count; i++) {
        cout << "*";
    }
    cout << endl;
}

// Рекурсивная функция вычисления факториала
int factorial(int n) {
    if (n <= 1) {
        return 1;
    }
    return n * factorial(n - 1);
}

// Функция печати массива
void printArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        cout << arr[i] << " ";
    }
    cout << endl;
}

// Функция поиска максимума в массиве
int findMax(int arr[], int size) {
    int max = arr[0];
    for (int i = 1; i < size; i++) {
        if (arr[i] > max) {
            max = arr[i];
        }
    }
    return max;
}

/*
ПРАКТИЧЕСКИЕ УПРАЖНЕНИЯ:

Упражнение 1: Функция для возведения в степень
Создай функцию для вычисления x в степени n:
*/

int power(int base, int exponent) {
    int result = 1;
    for (int i = 0; i < exponent; i++) {
        result *= base;
    }
    return result;
}

void exercise1() {
    int base, exp;
    cout << "Введите основание: ";
    cin >> base;
    cout << "Введите степень: ";
    cin >> exp;
    
    int result = power(base, exp);
    cout << base << "^" << exp << " = " << result << endl;
}

/*
Упражнение 2: Функция для поиска минимума из трёх чисел
Создай функцию для нахождения минимального из трёх чисел:
*/

int findMin(int a, int b, int c) {
    int min = a;
    if (b < min) min = b;
    if (c < min) min = c;
    return min;
}

void exercise2() {
    int x, y, z;
    cout << "Введите три числа: ";
    cin >> x >> y >> z;
    
    int min = findMin(x, y, z);
    cout << "Минимальное число: " << min << endl;
}

/*
Упражнение 3: Функция для проверки простого числа
Создай функцию для проверки, является ли число простым:
*/

bool isPrime(int n) {
    if (n < 2) return false;
    if (n == 2) return true;
    if (n % 2 == 0) return false;
    
    for (int i = 3; i * i <= n; i += 2) {
        if (n % i == 0) return false;
    }
    return true;
}

void exercise3() {
    int num;
    cout << "Введите число для проверки: ";
    cin >> num;
    
    if (isPrime(num)) {
        cout << num << " - простое число" << endl;
    } else {
        cout << num << " - не простое число" << endl;
    }
}

/*
Упражнение 4: Функция для подсчёта цифр в числе
Создай функцию для подсчёта количества цифр:
*/

int countDigits(int n) {
    if (n == 0) return 1;
    if (n < 0) n = -n;  // для отрицательных чисел
    
    int count = 0;
    while (n > 0) {
        count++;
        n /= 10;
    }
    return count;
}

void exercise4() {
    int num;
    cout << "Введите число: ";
    cin >> num;
    
    int count = countDigits(num);
    cout << "Количество цифр: " << count << endl;
}

/*
Упражнение 5: Функция для вычисления суммы цифр
Создай функцию для подсчёта суммы цифр числа:
*/

int sumOfDigits(int n) {
    if (n < 0) n = -n;
    
    int sum = 0;
    while (n > 0) {
        sum += n % 10;
        n /= 10;
    }
    return sum;
}

void exercise5() {
    int num;
    cout << "Введите число: ";
    cin >> num;
    
    int sum = sumOfDigits(num);
    cout << "Сумма цифр: " << sum << endl;
}

/*
Упражнение 6: Функция для вычисления НОД
Создай функцию для вычисления наибольшего общего делителя:
*/

int gcd(int a, int b) {
    while (b != 0) {
        int temp = b;
        b = a % b;
        a = temp;
    }
    return a;
}

void exercise6() {
    int a, b;
    cout << "Введите два числа: ";
    cin >> a >> b;
    
    int result = gcd(a, b);
    cout << "НОД(" << a << ", " << b << ") = " << result << endl;
}

/*
Упражнение 7: Функция для вычисления среднего значения массива
Создай функцию для вычисления среднего арифметического:
*/

double average(int arr[], int size) {
    int sum = 0;
    for (int i = 0; i < size; i++) {
        sum += arr[i];
    }
    return (double)sum / size;
}

void exercise7() {
    int arr[5];
    cout << "Введите 5 чисел: ";
    for (int i = 0; i < 5; i++) {
        cin >> arr[i];
    }
    
    double avg = average(arr, 5);
    cout << "Среднее значение: " << avg << endl;
}

/*
Упражнение 8: Функция для проверки палиндрома (число)
Создай функцию для проверки, является ли число палиндромом:
*/

bool isPalindrome(int n) {
    if (n < 0) return false;
    
    int original = n;
    int reversed = 0;
    
    while (n > 0) {
        reversed = reversed * 10 + n % 10;
        n /= 10;
    }
    
    return original == reversed;
}

void exercise8() {
    int num;
    cout << "Введите число: ";
    cin >> num;
    
    if (isPalindrome(num)) {
        cout << num << " - палиндром" << endl;
    } else {
        cout << num << " - не палиндром" << endl;
    }
}

/*
ДОМАШНИЕ ЗАДАНИЯ:

Задание 1: Калькулятор с функциями
Создай программу-калькулятор с функциями для каждой операции:
- double add(double a, double b)
- double subtract(double a, double b)
- double multiply(double a, double b)
- double divide(double a, double b)
- Добавь проверку деления на ноль

Задание 2: Функции для работы со строками
Создай функции:
- int countVowels(string str) - подсчёт гласных
- int countConsonants(string str) - подсчёт согласных
- bool hasDigits(string str) - есть ли цифры в строке

Задание 3: Игра "Угадай число" с функциями
Создай игру, используя функции:
- int generateNumber(int min, int max) - генерация числа
- string getHint(int guess, int target) - подсказка "больше" или "меньше"
- void printResult(int attempts) - вывод результата

Задание 4: Функции для работы с массивами
Создай функции:
- int findMin(int arr[], int size) - минимум
- int countElement(int arr[], int size, int target) - количество вхождений
- bool contains(int arr[], int size, int target) - есть ли элемент

Задание 5: Числа Фибоначчи
Создай функцию int fibonacci(int n), которая возвращает n-ое число Фибоначчи.
Последовательность: 0, 1, 1, 2, 3, 5, 8, 13, 21, ...

ПРОВЕРОЧНЫЕ ВОПРОСЫ:

1. Что такое функция и зачем она нужна?
2. Что такое параметры функции?
3. Что такое возвращаемое значение?
4. Что означает void?
5. Что такое прототип функции?
6. Что такое область видимости переменных?
7. Что такое рекурсия?
8. Что такое перегрузка функций?
9. Почему изменения параметра внутри функции не влияют на оригинал?

ЧТО ДАЛЬШЕ:
На следующем уроке мы изучим:
- Указатели и ссылки
- Как передавать данные по ссылке (чтобы изменять оригинал!)
- Работа с памятью
- Динамическое выделение памяти

ВРЕМЯ ИЗУЧЕНИЯ: 45-55 минут
ВРЕМЯ ПРАКТИКИ: 40-50 минут
ОБЩЕЕ ВРЕМЯ: 1.5-2 часа

===========================================
*/

int main() {
    cout << "=== УРОК 9: ФУНКЦИИ ===" << endl;
    
    examples();
    
    cout << "\n=== УПРАЖНЕНИЕ 1: ВОЗВЕДЕНИЕ В СТЕПЕНЬ ===" << endl;
    exercise1();
    
    cout << "\n=== УПРАЖНЕНИЕ 2: МИНИМУМ ИЗ ТРЁХ ===" << endl;
    exercise2();
    
    cout << "\n=== УПРАЖНЕНИЕ 3: ПРОВЕРКА ПРОСТОГО ЧИСЛА ===" << endl;
    exercise3();
    
    cout << "\n=== УПРАЖНЕНИЕ 4: ПОДСЧЁТ ЦИФР ===" << endl;
    exercise4();
    
    cout << "\n=== УПРАЖНЕНИЕ 5: СУММА ЦИФР ===" << endl;
    exercise5();
    
    cout << "\n=== УПРАЖНЕНИЕ 6: НОД ===" << endl;
    exercise6();
    
    cout << "\n=== УПРАЖНЕНИЕ 7: СРЕДНЕЕ ЗНАЧЕНИЕ ===" << endl;
    exercise7();
    
    cout << "\n=== УПРАЖНЕНИЕ 8: ПАЛИНДРОМ ===" << endl;
    exercise8();
    
    return 0;
}

