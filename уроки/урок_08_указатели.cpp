/*
===========================================
УРОК 8: УКАЗАТЕЛИ И ССЫЛКИ
===========================================

ЦЕЛИ УРОКА:
- Понять концепцию указателей
- Изучить работу с указателями
- Освоить ссылки и их отличие от указателей
- Научиться работать с указателями на массивы
- Понять основы динамической памяти

ТЕОРЕТИЧЕСКАЯ ЧАСТЬ:

УКАЗАТЕЛИ В C++:

1. ОБЪЯВЛЕНИЕ УКАЗАТЕЛЯ:
   тип_данных *имя_указателя;

2. ПОЛУЧЕНИЕ АДРЕСА:
   &переменная

3. РАЗЫМЕНОВАНИЕ:
   *указатель

4. ИНИЦИАЛИЗАЦИЯ:
   int *ptr = &variable;

ССЫЛКИ В C++:

1. ОБЪЯВЛЕНИЕ ССЫЛКИ:
   тип_данных &имя_ссылки = переменная;

2. ОСОБЕННОСТИ ССЫЛОК:
   - Должны быть инициализированы при объявлении
   - Не могут быть переназначены
   - Не могут быть NULL
   - Синтаксически работают как обычные переменные

РАЗНИЦА МЕЖДУ УКАЗАТЕЛЯМИ И ССЫЛКАМИ:
- Указатели могут быть NULL, ссылки - нет
- Указатели можно переназначать, ссылки - нет
- Указатели требуют разыменования, ссылки - нет
- Указатели занимают память, ссылки - нет

УКАЗАТЕЛИ НА МАССИВЫ:
- Имя массива - это указатель на первый элемент
- Арифметика указателей
- Доступ к элементам через указатели

ПРИМЕРЫ КОДА:
*/

#include <iostream>
using namespace std;

int main() {
    // Основы указателей
    cout << "=== ОСНОВЫ УКАЗАТЕЛЕЙ ===" << endl;
    int num = 42;
    int *ptr = &num;
    
    cout << "Значение переменной: " << num << endl;
    cout << "Адрес переменной: " << &num << endl;
    cout << "Значение указателя: " << ptr << endl;
    cout << "Значение по указателю: " << *ptr << endl;
    
    // Изменение значения через указатель
    *ptr = 100;
    cout << "После изменения через указатель: " << num << endl;
    
    // Ссылки
    cout << "\n=== ССЫЛКИ ===" << endl;
    int value = 50;
    int &ref = value;
    
    cout << "Значение переменной: " << value << endl;
    cout << "Значение ссылки: " << ref << endl;
    
    // Изменение значения через ссылку
    ref = 200;
    cout << "После изменения через ссылку: " << value << endl;
    
    // Указатели на массивы
    cout << "\n=== УКАЗАТЕЛИ НА МАССИВЫ ===" << endl;
    int arr[5] = {1, 2, 3, 4, 5};
    int *arrPtr = arr; // arr - указатель на первый элемент
    
    cout << "Элементы массива через указатель:" << endl;
    for (int i = 0; i < 5; i++) {
        cout << "arr[" << i << "] = " << *(arrPtr + i) << endl;
    }
    
    // Арифметика указателей
    cout << "\n=== АРИФМЕТИКА УКАЗАТЕЛЕЙ ===" << endl;
    int *ptr1 = &arr[0];
    int *ptr2 = &arr[2];
    
    cout << "ptr1 указывает на: " << *ptr1 << endl;
    cout << "ptr2 указывает на: " << *ptr2 << endl;
    cout << "Разность указателей: " << (ptr2 - ptr1) << endl;
    
    return 0;
}

/*
ПРАКТИЧЕСКИЕ УПРАЖНЕНИЯ:

Упражнение 1: Обмен значений через указатели
Создай функцию для обмена значений двух переменных через указатели:
*/

void swapWithPointers(int *a, int *b) {
    int temp = *a;
    *a = *b;
    *b = temp;
}

void exercise1() {
    int x = 10, y = 20;
    
    cout << "До обмена: x = " << x << ", y = " << y << endl;
    swapWithPointers(&x, &y);
    cout << "После обмена: x = " << x << ", y = " << y << endl;
}

/*
Упражнение 2: Обмен значений через ссылки
Создай функцию для обмена значений двух переменных через ссылки:
*/

void swapWithReferences(int &a, int &b) {
    int temp = a;
    a = b;
    b = temp;
}

void exercise2() {
    int x = 30, y = 40;
    
    cout << "До обмена: x = " << x << ", y = " << y << endl;
    swapWithReferences(x, y);
    cout << "После обмена: x = " << x << ", y = " << y << endl;
}

/*
Упражнение 3: Поиск максимума через указатели
Создай функцию для поиска максимального элемента в массиве через указатели:
*/

int findMaxWithPointers(int *arr, int size) {
    int max = *arr;
    for (int i = 1; i < size; i++) {
        if (*(arr + i) > max) {
            max = *(arr + i);
        }
    }
    return max;
}

void exercise3() {
    int arr[6] = {5, 8, 3, 12, 7, 2};
    
    cout << "Массив: ";
    for (int i = 0; i < 6; i++) {
        cout << arr[i] << " ";
    }
    cout << endl;
    
    int max = findMaxWithPointers(arr, 6);
    cout << "Максимальный элемент: " << max << endl;
}

/*
Упражнение 4: Копирование строки через указатели
Создай функцию для копирования строки через указатели:
*/

void copyString(char *dest, const char *src) {
    while (*src != '\0') {
        *dest = *src;
        dest++;
        src++;
    }
    *dest = '\0';
}

void exercise4() {
    char source[50] = "Hello, World!";
    char destination[50];
    
    cout << "Исходная строка: " << source << endl;
    copyString(destination, source);
    cout << "Скопированная строка: " << destination << endl;
}

/*
Упражнение 5: Подсчет длины строки через указатели
Создай функцию для подсчета длины строки через указатели:
*/

int stringLength(const char *str) {
    int length = 0;
    while (*str != '\0') {
        length++;
        str++;
    }
    return length;
}

void exercise5() {
    char str[100];
    cout << "Введите строку: ";
    cin.ignore(); // очищаем буфер
    cin.getline(str, 100);
    
    int length = stringLength(str);
    cout << "Длина строки: " << length << endl;
}

/*
ДОМАШНИЕ ЗАДАНИЯ:

Задание 1: Функция для поиска подстроки
Создай функцию для поиска подстроки в строке через указатели:
- Входные параметры: строка и подстрока
- Возвращает позицию первого вхождения
- Используй только указатели

Задание 2: Функция для объединения строк
Создай функцию для объединения двух строк через указатели:
- Входные параметры: две строки
- Результат: объединенная строка
- Используй только указатели

Задание 3: Функция для реверса строки
Создай функцию для обращения строки через указатели:
- Входной параметр: строка
- Результат: обращенная строка
- Используй только указатели

ПРОВЕРОЧНЫЕ ВОПРОСЫ:

1. Что такое указатель?
2. Как получить адрес переменной?
3. Как разыменовать указатель?
4. В чем разница между указателями и ссылками?
5. Можно ли ссылке присвоить NULL?
6. Что такое арифметика указателей?
7. Как указатели связаны с массивами?

ЧТО ДАЛЬШЕ:
На следующем уроке мы изучим:
- Структуры (struct)
- Объявление и использование структур
- Массивы структур
- Указатели на структуры
- Вложенные структуры

ВРЕМЯ ИЗУЧЕНИЯ: 50-60 минут
ВРЕМЯ ПРАКТИКИ: 40-50 минут
ОБЩЕЕ ВРЕМЯ: 1.5-2 часа

===========================================
*/

#include <iostream>
using namespace std;

int main() {
    // Основная программа
    cout << "=== УРОК 8: УКАЗАТЕЛИ И ССЫЛКИ ===" << endl;
    
    // Выполняем упражнения
    cout << "\n=== УПРАЖНЕНИЕ 1: ОБМЕН ЧЕРЕЗ УКАЗАТЕЛИ ===" << endl;
    exercise1();
    
    cout << "\n=== УПРАЖНЕНИЕ 2: ОБМЕН ЧЕРЕЗ ССЫЛКИ ===" << endl;
    exercise2();
    
    cout << "\n=== УПРАЖНЕНИЕ 3: ПОИСК МАКСИМУМА ===" << endl;
    exercise3();
    
    cout << "\n=== УПРАЖНЕНИЕ 4: КОПИРОВАНИЕ СТРОКИ ===" << endl;
    exercise4();
    
    cout << "\n=== УПРАЖНЕНИЕ 5: ПОДСЧЕТ ДЛИНЫ СТРОКИ ===" << endl;
    exercise5();
    
    return 0;
}





