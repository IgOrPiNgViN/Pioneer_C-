/*
===========================================
–£–†–û–ö 27: –ü–†–û–ï–ö–¢ "–ò–ì–†–ê –£–ì–ê–î–ê–ô –ß–ò–°–õ–û"
===========================================

–¶–ï–õ–ò –£–†–û–ö–ê:
- –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∏–≥—Ä—É "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ"
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –∏–∑—É—á–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ C++
- –ù–∞—É—á–∏—Ç—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- –û—Å–≤–æ–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –ü–æ–Ω—è—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–≥—Ä

–¢–ï–û–†–ï–¢–ò–ß–ï–°–ö–ê–Ø –ß–ê–°–¢–¨:

–ü–†–û–ï–ö–¢ "–ò–ì–†–ê –£–ì–ê–î–ê–ô –ß–ò–°–õ–û":

–≠—Ç–æ—Ç —É—Ä–æ–∫ –ø–æ—Å–≤—è—â–µ–Ω —Å–æ–∑–¥–∞–Ω–∏—é –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –∏–≥—Ä—ã "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ", –∫–æ—Ç–æ—Ä–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç
–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∏–∑—É—á–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π C++:

1. –ö–õ–ê–°–°–´ –ò –û–ë–™–ï–ö–¢–´:
   - –ö–ª–∞—Å—Å Game –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–π
   - –ö–ª–∞—Å—Å Player –¥–ª—è –∏–≥—Ä–æ–∫–∞
   - –ö–ª–∞—Å—Å Statistics –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

2. –ù–ê–°–õ–ï–î–û–í–ê–ù–ò–ï –ò –ü–û–õ–ò–ú–û–†–§–ò–ó–ú:
   - –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å Difficulty
   - –ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
   - –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã

3. –®–ê–ë–õ–û–ù–´:
   - –®–∞–±–ª–æ–Ω–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - –®–∞–±–ª–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

4. STL:
   - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –ê–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

5. –û–ë–†–ê–ë–û–¢–ö–ê –ò–°–ö–õ–Æ–ß–ï–ù–ò–ô:
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–≤–æ–¥–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ü–†–ò–ú–ï–†–´ –ö–û–î–ê:
*/

#include <iostream>
#include <vector>
#include <string>
#include <memory>
#include <stdexcept>
#include <ctime>
#include <cstdlib>
#include <algorithm>
#include <fstream>
using namespace std;

// –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è —É—Ä–æ–≤–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
class Difficulty {
protected:
    string name_;
    int maxNumber_;
    int maxAttempts_;
    
public:
    Difficulty(const string& name, int maxNumber, int maxAttempts)
        : name_(name), maxNumber_(maxNumber), maxAttempts_(maxAttempts) {}
    
    virtual ~Difficulty() = default;
    
    virtual int generateNumber() const {
        return rand() % maxNumber_ + 1;
    }
    
    virtual string getHint(int guess, int secretNumber) const {
        if (guess < secretNumber) {
            return "–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –±–æ–ª—å—à–µ!";
        } else if (guess > secretNumber) {
            return "–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –º–µ–Ω—å—à–µ!";
        } else {
            return "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É–≥–∞–¥–∞–ª–∏!";
        }
    }
    
    const string& getName() const { return name_; }
    int getMaxNumber() const { return maxNumber_; }
    int getMaxAttempts() const { return maxAttempts_; }
};

// –ö–ª–∞—Å—Å –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è
class EasyDifficulty : public Difficulty {
public:
    EasyDifficulty() : Difficulty("–õ–µ–≥–∫–∏–π", 50, 10) {}
    
    string getHint(int guess, int secretNumber) const override {
        int difference = abs(guess - secretNumber);
        string baseHint = Difficulty::getHint(guess, secretNumber);
        
        if (difference <= 5) {
            return baseHint + " (–û—á–µ–Ω—å –±–ª–∏–∑–∫–æ!)";
        } else if (difference <= 15) {
            return baseHint + " (–ë–ª–∏–∑–∫–æ)";
        } else {
            return baseHint + " (–î–∞–ª–µ–∫–æ)";
        }
    }
};

// –ö–ª–∞—Å—Å –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è
class MediumDifficulty : public Difficulty {
public:
    MediumDifficulty() : Difficulty("–°—Ä–µ–¥–Ω–∏–π", 100, 7) {}
};

// –ö–ª–∞—Å—Å –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
class HardDifficulty : public Difficulty {
public:
    HardDifficulty() : Difficulty("–°–ª–æ–∂–Ω—ã–π", 200, 5) {}
    
    string getHint(int guess, int secretNumber) const override {
        return Difficulty::getHint(guess, secretNumber);
    }
};

// –ö–ª–∞—Å—Å –¥–ª—è –∏–≥—Ä–æ–∫–∞
class Player {
private:
    string name_;
    int gamesPlayed_;
    int gamesWon_;
    int totalAttempts_;
    int bestScore_;
    
public:
    Player(const string& name = "–ò–≥—Ä–æ–∫") 
        : name_(name), gamesPlayed_(0), gamesWon_(0), totalAttempts_(0), bestScore_(INT_MAX) {}
    
    void playGame() { gamesPlayed_++; }
    void winGame() { gamesWon_++; }
    void addAttempts(int attempts) { totalAttempts_ += attempts; }
    
    void updateBestScore(int attempts) {
        if (attempts < bestScore_) {
            bestScore_ = attempts;
        }
    }
    
    const string& getName() const { return name_; }
    int getGamesPlayed() const { return gamesPlayed_; }
    int getGamesWon() const { return gamesWon_; }
    int getTotalAttempts() const { return totalAttempts_; }
    int getBestScore() const { return bestScore_; }
    
    double getWinRate() const {
        return gamesPlayed_ > 0 ? (double)gamesWon_ / gamesPlayed_ * 100 : 0;
    }
    
    double getAverageAttempts() const {
        return gamesPlayed_ > 0 ? (double)totalAttempts_ / gamesPlayed_ : 0;
    }
    
    void displayStats() const {
        cout << "\n=== –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ì–†–û–ö–ê ===" << endl;
        cout << "–ò–º—è: " << name_ << endl;
        cout << "–ò–≥—Ä —Å—ã–≥—Ä–∞–Ω–æ: " << gamesPlayed_ << endl;
        cout << "–ò–≥—Ä –≤—ã–∏–≥—Ä–∞–Ω–æ: " << gamesWon_ << endl;
        cout << "–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥: " << fixed << setprecision(1) << getWinRate() << "%" << endl;
        cout << "–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫: " << fixed << setprecision(1) << getAverageAttempts() << endl;
        cout << "–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: " << bestScore_ << " –ø–æ–ø—ã—Ç–æ–∫" << endl;
    }
};

// –ö–ª–∞—Å—Å –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
class Statistics {
private:
    vector<Player> players_;
    
public:
    void addPlayer(const Player& player) {
        players_.push_back(player);
    }
    
    void displayLeaderboard() const {
        cout << "\n=== –¢–ê–ë–õ–ò–¶–ê –õ–ò–î–ï–†–û–í ===" << endl;
        
        if (players_.empty()) {
            cout << "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è" << endl;
            return;
        }
        
        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–æ—Ü–µ–Ω—Ç—É –ø–æ–±–µ–¥
        vector<Player> sortedPlayers = players_;
        sort(sortedPlayers.begin(), sortedPlayers.end(),
            [](const Player& a, const Player& b) {
                return a.getWinRate() > b.getWinRate();
            });
        
        cout << "–ú–µ—Å—Ç–æ | –ò–º—è | –ü–æ–±–µ–¥ | –ü–æ–ø—ã—Ç–æ–∫ | –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç" << endl;
        cout << "------|-----|-------|---------|------------------" << endl;
        
        for (size_t i = 0; i < sortedPlayers.size(); ++i) {
            const Player& player = sortedPlayers[i];
            cout << setw(5) << (i + 1) << " | "
                 << setw(3) << player.getName() << " | "
                 << setw(5) << player.getGamesWon() << " | "
                 << setw(7) << fixed << setprecision(1) << player.getAverageAttempts() << " | "
                 << setw(16) << player.getBestScore() << endl;
        }
    }
    
    void saveToFile(const string& filename) const {
        ofstream file(filename);
        if (file.is_open()) {
            for (const auto& player : players_) {
                file << player.getName() << " " << player.getGamesPlayed() << " "
                     << player.getGamesWon() << " " << player.getTotalAttempts() << " "
                     << player.getBestScore() << endl;
            }
            file.close();
            cout << "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ —Ñ–∞–π–ª " << filename << endl;
        } else {
            cout << "–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞!" << endl;
        }
    }
    
    void loadFromFile(const string& filename) {
        ifstream file(filename);
        if (file.is_open()) {
            players_.clear();
            string name;
            int gamesPlayed, gamesWon, totalAttempts, bestScore;
            
            while (file >> name >> gamesPlayed >> gamesWon >> totalAttempts >> bestScore) {
                Player player(name);
                // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
                players_.push_back(player);
            }
            file.close();
            cout << "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ —Ñ–∞–π–ª–∞ " << filename << endl;
        } else {
            cout << "–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω!" << endl;
        }
    }
};

// –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∏–≥—Ä—ã
class Game {
private:
    unique_ptr<Difficulty> difficulty_;
    Player* player_;
    int secretNumber_;
    int attempts_;
    bool isGameOver_;
    
public:
    Game(Player* player = nullptr) 
        : player_(player), attempts_(0), isGameOver_(false) {
        srand(time(0));
    }
    
    void setDifficulty(unique_ptr<Difficulty> diff) {
        difficulty_ = move(diff);
    }
    
    void startNewGame() {
        if (!difficulty_) {
            throw runtime_error("–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!");
        }
        
        secretNumber_ = difficulty_->generateNumber();
        attempts_ = 0;
        isGameOver_ = false;
        
        cout << "\n=== –ù–û–í–ê–Ø –ò–ì–†–ê ===" << endl;
        cout << "–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: " << difficulty_->getName() << endl;
        cout << "–î–∏–∞–ø–∞–∑–æ–Ω —á–∏—Å–µ–ª: 1 - " << difficulty_->getMaxNumber() << endl;
        cout << "–ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫: " << difficulty_->getMaxAttempts() << endl;
        cout << "–£–≥–∞–¥–∞–π—Ç–µ –∑–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ!" << endl;
    }
    
    bool makeGuess(int guess) {
        if (isGameOver_) {
            cout << "–ò–≥—Ä–∞ —É–∂–µ –æ–∫–æ–Ω—á–µ–Ω–∞!" << endl;
            return false;
        }
        
        attempts_++;
        
        if (guess == secretNumber_) {
            cout << "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É–≥–∞–¥–∞–ª–∏ —á–∏—Å–ª–æ " << secretNumber_ 
                 << " –∑–∞ " << attempts_ << " –ø–æ–ø—ã—Ç–æ–∫!" << endl;
            
            if (player_) {
                player_->playGame();
                player_->winGame();
                player_->addAttempts(attempts_);
                player_->updateBestScore(attempts_);
            }
            
            isGameOver_ = true;
            return true;
        }
        
        cout << difficulty_->getHint(guess, secretNumber_) << endl;
        
        if (attempts_ >= difficulty_->getMaxAttempts()) {
            cout << "–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –±—ã–ª–æ " << secretNumber_ << endl;
            
            if (player_) {
                player_->playGame();
                player_->addAttempts(attempts_);
            }
            
            isGameOver_ = true;
        }
        
        return false;
    }
    
    bool isGameOver() const { return isGameOver_; }
    int getAttempts() const { return attempts_; }
    int getMaxAttempts() const { return difficulty_ ? difficulty_->getMaxAttempts() : 0; }
    int getSecretNumber() const { return secretNumber_; }
};

// –ö–ª–∞—Å—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
class GameMenu {
private:
    Game game_;
    Player player_;
    Statistics statistics_;
    
public:
    GameMenu() : game_(&player_) {
        statistics_.loadFromFile("statistics.txt");
    }
    
    void run() {
        int choice;
        
        while (true) {
            displayMainMenu();
            cout << "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: ";
            cin >> choice;
            
            switch (choice) {
                case 1:
                    playGame();
                    break;
                case 2:
                    player_.displayStats();
                    break;
                case 3:
                    statistics_.displayLeaderboard();
                    break;
                case 4:
                    statistics_.saveToFile("statistics.txt");
                    break;
                case 0:
                    cout << "–î–æ —Å–≤–∏–¥–∞–Ω–∏—è!" << endl;
                    return;
                default:
                    cout << "–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä!" << endl;
                    break;
            }
            
            cout << "\n–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...";
            cin.ignore();
            cin.get();
        }
    }
    
private:
    void displayMainMenu() {
        cout << "\n" << string(50, '=') << endl;
        cout << "           –ò–ì–†–ê '–£–ì–ê–î–ê–ô –ß–ò–°–õ–û'" << endl;
        cout << string(50, '=') << endl;
        cout << "1. –ò–≥—Ä–∞—Ç—å" << endl;
        cout << "2. –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É" << endl;
        cout << "3. –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤" << endl;
        cout << "4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É" << endl;
        cout << "0. –í—ã—Ö–æ–¥" << endl;
    }
    
    void playGame() {
        int difficultyChoice;
        
        cout << "\n–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:" << endl;
        cout << "1. –õ–µ–≥–∫–∏–π (1-50, 10 –ø–æ–ø—ã—Ç–æ–∫)" << endl;
        cout << "2. –°—Ä–µ–¥–Ω–∏–π (1-100, 7 –ø–æ–ø—ã—Ç–æ–∫)" << endl;
        cout << "3. –°–ª–æ–∂–Ω—ã–π (1-200, 5 –ø–æ–ø—ã—Ç–æ–∫)" << endl;
        cout << "–í—ã–±–æ—Ä: ";
        cin >> difficultyChoice;
        
        switch (difficultyChoice) {
            case 1:
                game_.setDifficulty(make_unique<EasyDifficulty>());
                break;
            case 2:
                game_.setDifficulty(make_unique<MediumDifficulty>());
                break;
            case 3:
                game_.setDifficulty(make_unique<HardDifficulty>());
                break;
            default:
                cout << "–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä! –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å." << endl;
                game_.setDifficulty(make_unique<MediumDifficulty>());
                break;
        }
        
        try {
            game_.startNewGame();
            
            int guess;
            while (!game_.isGameOver()) {
                cout << "\n–ü–æ–ø—ã—Ç–∫–∞ " << (game_.getAttempts() + 1) << "/" << game_.getMaxAttempts() << ": ";
                cin >> guess;
                
                if (cin.fail()) {
                    cout << "–ù–µ–≤–µ—Ä–Ω—ã–π –≤–≤–æ–¥! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ." << endl;
                    cin.clear();
                    cin.ignore(numeric_limits<streamsize>::max(), '\n');
                    continue;
                }
                
                game_.makeGuess(guess);
            }
            
        } catch (const exception& e) {
            cout << "–û—à–∏–±–∫–∞: " << e.what() << endl;
        }
    }
};

int main() {
    cout << "=== –ü–†–û–ï–ö–¢ '–ò–ì–†–ê –£–ì–ê–î–ê–ô –ß–ò–°–õ–û' ===" << endl;
    
    GameMenu menu;
    menu.run();
    
    return 0;
}

/*
–ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –£–ü–†–ê–ñ–ù–ï–ù–ò–Ø:

–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —É—Ä–æ–≤–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
–î–æ–±–∞–≤—å –≤ –∏–≥—Ä—É –Ω–æ–≤—ã–µ —É—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:
*/

class ExpertDifficulty : public Difficulty {
public:
    ExpertDifficulty() : Difficulty("–≠–∫—Å–ø–µ—Ä—Ç", 500, 3) {}
    
    string getHint(int guess, int secretNumber) const override {
        return Difficulty::getHint(guess, secretNumber);
    }
};

class MasterDifficulty : public Difficulty {
public:
    MasterDifficulty() : Difficulty("–ú–∞—Å—Ç–µ—Ä", 1000, 2) {}
    
    string getHint(int guess, int secretNumber) const override {
        return Difficulty::getHint(guess, secretNumber);
    }
};

void exercise1() {
    cout << "=== –£–ü–†–ê–ñ–ù–ï–ù–ò–ï 1: –ù–û–í–´–ï –£–†–û–í–ù–ò –°–õ–û–ñ–ù–û–°–¢–ò ===" << endl;
    
    Player player("–¢–µ—Å—Ç–æ–≤—ã–π –∏–≥—Ä–æ–∫");
    Game game(&player);
    
    // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
    game.setDifficulty(make_unique<ExpertDifficulty>());
    game.startNewGame();
    
    // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è
    game.setDifficulty(make_unique<MasterDifficulty>());
    game.startNewGame();
}

/*
–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
–£–ª—É—á—à–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–≥—Ä—ã:
*/

class ImprovedGameMenu : public GameMenu {
public:
    void run() override {
        int choice;
        
        while (true) {
            displayWelcome();
            displayMainMenu();
            cout << "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: ";
            
            if (!(cin >> choice)) {
                cout << "–ù–µ–≤–µ—Ä–Ω—ã–π –≤–≤–æ–¥! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ." << endl;
                cin.clear();
                cin.ignore(numeric_limits<streamsize>::max(), '\n');
                continue;
            }
            
            switch (choice) {
                case 1:
                    playGame();
                    break;
                case 2:
                    player_.displayStats();
                    break;
                case 3:
                    statistics_.displayLeaderboard();
                    break;
                case 4:
                    statistics_.saveToFile("statistics.txt");
                    break;
                case 0:
                    cout << "–î–æ —Å–≤–∏–¥–∞–Ω–∏—è!" << endl;
                    return;
                default:
                    cout << "–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä!" << endl;
                    break;
            }
            
            cout << "\n–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...";
            cin.ignore();
            cin.get();
        }
    }
    
private:
    void displayWelcome() const {
        cout << "\n" << string(60, '=') << endl;
        cout << "           –î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨ –í –ò–ì–†–£ '–£–ì–ê–î–ê–ô –ß–ò–°–õ–û'" << endl;
        cout << string(60, '=') << endl;
    }
};

void exercise2() {
    cout << "=== –£–ü–†–ê–ñ–ù–ï–ù–ò–ï 2: –£–õ–£–ß–®–ï–ù–ù–´–ô –ò–ù–¢–ï–†–§–ï–ô–° ===" << endl;
    
    ImprovedGameMenu menu;
    menu.run();
}

/*
–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
–î–æ–±–∞–≤—å –≤ –∏–≥—Ä—É –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
*/

class GameFeatures {
public:
    static void displayRules() {
        cout << "\n=== –ü–†–ê–í–ò–õ–ê –ò–ì–†–´ ===" << endl;
        cout << "1. –ö–æ–º–ø—å—é—Ç–µ—Ä –∑–∞–≥–∞–¥—ã–≤–∞–µ—Ç —á–∏—Å–ª–æ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ" << endl;
        cout << "2. –í—ã –¥–æ–ª–∂–Ω—ã —É–≥–∞–¥–∞—Ç—å —ç—Ç–æ —á–∏—Å–ª–æ –∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫" << endl;
        cout << "3. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫—É" << endl;
        cout << "4. –¶–µ–ª—å - —É–≥–∞–¥–∞—Ç—å —á–∏—Å–ª–æ –∑–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫" << endl;
    }
    
    static void displayTips() {
        cout << "\n=== –°–û–í–ï–¢–´ ===" << endl;
        cout << "1. –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å —Å–µ—Ä–µ–¥–∏–Ω—ã –¥–∏–∞–ø–∞–∑–æ–Ω–∞" << endl;
        cout << "2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫" << endl;
        cout << "3. –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞–π—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏" << endl;
        cout << "4. –ù–µ –ø–∞–Ω–∏–∫—É–π—Ç–µ, –µ—Å–ª–∏ –Ω–µ —É–≥–∞–¥–∞–ª–∏ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞" << endl;
    }
    
    static void displayAchievements(const Player& player) {
        cout << "\n=== –î–û–°–¢–ò–ñ–ï–ù–ò–Ø ===" << endl;
        
        if (player.getGamesWon() >= 10) {
            cout << "üèÜ –ú–∞—Å—Ç–µ—Ä –∏–≥—Ä—ã - –≤—ã–∏–≥—Ä–∞–Ω–æ 10+ –∏–≥—Ä" << endl;
        }
        
        if (player.getBestScore() <= 3) {
            cout << "üéØ –°–Ω–∞–π–ø–µ—Ä - —É–≥–∞–¥–∞–Ω–æ –∑–∞ 3 –ø–æ–ø—ã—Ç–∫–∏ –∏–ª–∏ –º–µ–Ω—å—à–µ" << endl;
        }
        
        if (player.getWinRate() >= 80) {
            cout << "‚≠ê –ß–µ–º–ø–∏–æ–Ω - –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥ 80% –∏–ª–∏ –≤—ã—à–µ" << endl;
        }
        
        if (player.getGamesPlayed() >= 50) {
            cout << "üéÆ –í–µ—Ç–µ—Ä–∞–Ω - —Å—ã–≥—Ä–∞–Ω–æ 50+ –∏–≥—Ä" << endl;
        }
    }
};

void exercise3() {
    cout << "=== –£–ü–†–ê–ñ–ù–ï–ù–ò–ï 3: –ù–û–í–´–ï –§–£–ù–ö–¶–ò–ò ===" << endl;
    
    Player player("–¢–µ—Å—Ç–æ–≤—ã–π –∏–≥—Ä–æ–∫");
    
    // –°–∏–º—É–ª—è—Ü–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    for (int i = 0; i < 15; ++i) {
        player.playGame();
        player.winGame();
        player.addAttempts(3);
        player.updateBestScore(3);
    }
    
    GameFeatures::displayRules();
    GameFeatures::displayTips();
    GameFeatures::displayAchievements(player);
}

/*
–î–û–ú–ê–®–ù–ò–ï –ó–ê–î–ê–ù–ò–Ø:

–ó–∞–¥–∞–Ω–∏–µ 1: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
–†–∞—Å—à–∏—Ä—å –∏–≥—Ä—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∏–≥—Ä—ã
- –¢—É—Ä–Ω–∏—Ä–Ω—ã–π —Ä–µ–∂–∏–º
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ –±–æ–Ω—É—Å—ã
- –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

–ó–∞–¥–∞–Ω–∏–µ 2: –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
–°–æ–∑–¥–∞–π –≤–µ—Ä—Å–∏—é –∏–≥—Ä—ã —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ GUI
- –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã
- –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

–ó–∞–¥–∞–Ω–∏–µ 3: –°–µ—Ç–µ–≤–∞—è –∏–≥—Ä–∞
–°–æ–∑–¥–∞–π —Å–µ—Ç–µ–≤—É—é –≤–µ—Ä—Å–∏—é –∏–≥—Ä—ã:
- –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏–≥—Ä–∞
- –°–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ß–∞—Ç –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏

–ü–†–û–í–ï–†–û–ß–ù–´–ï –í–û–ü–†–û–°–´:

1. –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –û–û–ü –≤ –∏–≥—Ä–æ–≤–æ–º –ø—Ä–æ–µ–∫—Ç–µ?
2. –ö–∞–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã?
3. –ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å?
4. –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ –∏–≥—Ä–µ?
5. –ö–∞–∫ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏–≥—Ä—ã?
6. –ö–∞–∫–∏–µ —Ç–µ—Å—Ç—ã –Ω—É–∂–Ω—ã –¥–ª—è –∏–≥—Ä—ã?
7. –ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å?

–ß–¢–û –î–ê–õ–¨–®–ï:
–ù–∞ —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ –º—ã –∏–∑—É—á–∏–º:
- –ü—Ä–æ–µ–∫—Ç "–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏"
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏
- –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–∏—Å—Ç–µ–º—ã
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–í–†–ï–ú–Ø –ò–ó–£–ß–ï–ù–ò–Ø: 60-90 –º–∏–Ω—É—Ç
–í–†–ï–ú–Ø –ü–†–ê–ö–¢–ò–ö–ò: 60-90 –º–∏–Ω—É—Ç
–û–ë–©–ï–ï –í–†–ï–ú–Ø: 2-3 —á–∞—Å–∞

===========================================
*/

#include <iostream>
#include <vector>
#include <string>
#include <memory>
#include <stdexcept>
#include <ctime>
#include <cstdlib>
#include <algorithm>
#include <fstream>
#include <iomanip>
#include <limits>
using namespace std;

int main() {
    // –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
    cout << "=== –£–†–û–ö 27: –ü–†–û–ï–ö–¢ '–ò–ì–†–ê –£–ì–ê–î–ê–ô –ß–ò–°–õ–û' ===" << endl;
    
    // –í—ã–ø–æ–ª–Ω—è–µ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
    cout << "\n=== –£–ü–†–ê–ñ–ù–ï–ù–ò–ï 1: –ù–û–í–´–ï –£–†–û–í–ù–ò –°–õ–û–ñ–ù–û–°–¢–ò ===" << endl;
    exercise1();
    
    cout << "\n=== –£–ü–†–ê–ñ–ù–ï–ù–ò–ï 2: –£–õ–£–ß–®–ï–ù–ù–´–ô –ò–ù–¢–ï–†–§–ï–ô–° ===" << endl;
    exercise2();
    
    cout << "\n=== –£–ü–†–ê–ñ–ù–ï–ù–ò–ï 3: –ù–û–í–´–ï –§–£–ù–ö–¶–ò–ò ===" << endl;
    exercise3();
    
    return 0;
}





